knitr::opts_chunk$set(echo = TRUE)
# Chunk 2
library(lubridate); library(jsonlite); library(tidyverse); library(here)
# Chunk 3
d_path <- "data/01_raw_data/goal_actions/sandbox-results/"
# Chunk 4
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device
)
}
# Chunk 5
files <- dir(here(d_path))
d <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
read_json(path = here(data_path, file)) %>%
data.frame(
workerid = .$WorkerId,
action_response = .$answers$action_response,
hyp_q_order_prior = .$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = .$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = .$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = .$answers$posterior_beliefs %>% unlist(),
browser = .$answers$browser,
browser_width = .$answers$browser_width,
browser_height = .$answers$browser_height,
screen_width = .$answers$screen_width,
screen_height = .$answers$screen_height,
mobile_device = .$answers$mobile_device,
exp_time = .$answers
)
}
files <- dir(here(d_path))
d <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
View(d)
warnings
warnings()
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
read_json(path = here(data_path, file)) %>%
data.frame(
workerid = .$WorkerId,
action_response = .$answers$action_response,
hyp_q_order_prior = .$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = .$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = .$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = .$answers$posterior_beliefs %>% unlist(),
browser = .$answers$browser,
browser_width = .$answers$browser_width,
browser_height = .$answers$browser_height,
screen_width = .$answers$screen_width,
screen_height = .$answers$screen_height,
mobile_device = .$answers$mobile_device
)
}
files <- dir(here(d_path))
d <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
View(d)
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file)) %>%
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device,
exp_time = d$answers
)
}
files <- dir(here(d_path))
df <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 2
library(lubridate); library(jsonlite); library(tidyverse); library(here)
# Chunk 3
d_path <- "data/01_raw_data/goal_actions/sandbox-results/"
# Chunk 4
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file)) %>%
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device,
exp_time = d$answers
)
}
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file)) %>%
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device
)
}
files <- dir(here(d_path))
df <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 2
library(lubridate); library(jsonlite); library(tidyverse); library(here)
# Chunk 3
d_path <- "data/01_raw_data/goal_actions/sandbox-results/"
# Chunk 4
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file)) %>%
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device
)
}
files <- dir(here(d_path))
df <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
files
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device
)
}
files <- dir(here(d_path))
df <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
df
View(d)
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device,
about = d$about,
comment = d$comment,
age = d$age,
gender = d$gender,
first_language = d$language,
experiment_time = d$experiment_completion_time / 1000,
action_trial_time = d$action_trial_time / 100
)
}
files <- dir(here(d_path))
df <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device,
about = d$answers$about,
comment = d$answers$comment,
age = d$answers$age,
gender = d$answers$gender,
first_language = d$answers$language,
experiment_time = d$answers$experiment_completion_time / 1000,
action_trial_time = d$answers$action_trial_time / 100
)
}
files <- dir(here(d_path))
df <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
View(df)
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device,
about = d$answers$about,
comment = d$answers$comment,
age = d$answers$age,
gender = d$answers$gender,
first_language = d$answers$language,
experiment_time = d$answers$experiment_completion_time / 1000,
action_trial_time = d$answers$action_trial_time / 1000
)
}
files <- dir(here(d_path))
df <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
df_anonymized <- df %>%
select(workerid) %>%
distinct() %>%
mutate(subids = 1:nrow(.))
View(df_anonymized)
df_anonymized <- df %>%
select(workerid) %>%
distinct() %>%
mutate(subids = 1:nrow(.)) %>%
bind_cols(., df)
df_anonymized <- df %>%
select(workerid) %>%
distinct() %>%
mutate(subids = 1:nrow(.)) %>%
select(-workerid)
df_anonymized
df_anonymized <- df %>%
select(workerid) %>%
distinct() %>%
mutate(subid = 1:nrow(.)) %>%
select(-workerid)
df_anonymized <- df %>%
select(workerid) %>%
distinct() %>%
mutate(id = 1:nrow(.)) %>%
select(-workerid)
df %>% distinct(workerid)
df %>% distinct(workerid) %>% length()
df %>% distinct(workerid) %>% nrow()
n_subs <- df %>% distinct(workerid) %>% nrow()
n_subs
df_anonymized <- df %>%
select(workerid) %>%
distinct() %>%
mutate(id = 1:nrow(.))
df_final <- left_join(df, df_anonymized, by = "workerid")
View(df_final)
?select
df_anonymized <- df %>%
select(workerid) %>%
distinct() %>%
mutate(id = 1:nrow(.))
df_final <- left_join(df, df_anonymized, by = "workerid") %>%
select(id, everything())
df_anonymized <- df %>%
select(workerid) %>%
distinct() %>%
mutate(id = 1:nrow(.))
df_final <- left_join(df, df_anonymized, by = "workerid") %>%
select(id, everything(), - workerid)
write_csv(df_final, path = here("data/02_tidy_data"))
here()
write_csv(df_final, path = here("data/02_tidy_data/"))
?write_csv
here()
?here
write_csv(df_final, path = here("/data/02_tidy_data"))
write_csv(df_final, path = here("/data/02_tidy_data", "goal_action_tidy.csv"))
write_csv(df_final, path = here("/data/02_tidy_data", "goal_actions_tidy.csv"))
d <- read_csv(here(d_path, "goal_actions_tidy.csv"))
d_path <- "data/02_tidy_data/"
d <- read_csv(here(d_path, "goal_actions_tidy.csv"))
library(tidyverse); library(here)
d_path <- "data/02_tidy_data/"
d <- read_csv(here(d_path, "goal_actions_tidy.csv"))
View(d)
d %>%
group_by(id, action_response) %>%
count
d %>%
group_by(id, action_response) %>%
distinct() %>%
count
d %>%
select(id, action_response) %>%
unique()
d %>%
select(id, action_response) %>%
unique() %>%
group_by(id, action_response) %>%
count
d %>%
select(id, action_response) %>%
unique() %>%
count
d %>%
select(id, action_response) %>%
unique() %>%
group_by(id, action_response) %>%
count
names(d)
d %>%
select(id, action_response) %>%
unique() %>%
ggplot(aes(x = action_response)) +
geom_histogram()
d %>%
select(id, action_response) %>%
unique()
d %>%
select(id, action_response) %>%
unique() %>%
ggplot(aes(x = action_response)) +
geom_histogram(stat = "count")
theme_set(theme_minimal())
d %>%
select(id, action_response) %>%
unique() %>%
ggplot(aes(x = action_response)) +
geom_histogram(stat = "count")
d %>%
mutate(action_response_collapsed = ifelse(action_response == "orange_and_purple",
"both_buttons",
"single_button"))
library(magrittr); library(tidyverse); library(here)
theme_set(theme_minimal())
d %<>%
mutate(action_response_collapsed = ifelse(action_response == "orange_and_purple",
"both_buttons",
"single_button"))
d %>%
select(id, action_response_collapsed) %>%
unique() %>%
ggplot(aes(x = action_response)) +
geom_histogram(stat = "count")
d %>%
select(id, action_response_collapsed) %>%
unique() %>%
ggplot(aes(x = action_response_collapsed)) +
geom_histogram(stat = "count")
d %<>%
group_by(id) %>%
mutate(prior_normalized = prior_beliefs / sum(prior_beliefs))
d %<>%
group_by(id) %>%
mutate(prior_normalized = prior_beliefs / sum(prior_beliefs) %>% round(3))
d %<>%
group_by(id) %>%
mutate(prior_normalized = prior_beliefs / sum(prior_beliefs) %>% round(digits = 3))
d %<>%
group_by(id) %>%
mutate(prior_normalized = prior_beliefs / sum(prior_beliefs) %>% round(digits = 3))
View(d)
d %<>%
group_by(id) %>%
mutate(prior_normalized = round(prior_beliefs / sum(prior_beliefs), 3))
d %>%
group_by(hyp_q_order_prior) %>%
summarise(m_prior = mean(prior_normalized))
?rename
d %<>%
group_by(id) %>%
mutate(prior_normalized = round(prior_beliefs / sum(prior_beliefs), 3)) %>%
rename(prior_hypothsis = hyp_q_order_prior)
d %<>%
group_by(id) %>%
mutate(prior_normalized = round(prior_beliefs / sum(prior_beliefs), 3)) %>%
rename(prior_hypothesis = hyp_q_order_prior)
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 2
library(magrittr); library(tidyverse); library(here)
theme_set(theme_minimal())
# Chunk 3
d_path <- "data/02_tidy_data/"
d <- read_csv(here(d_path, "goal_actions_tidy.csv"))
d %<>%
group_by(id) %>%
mutate(prior_normalized = round(prior_beliefs / sum(prior_beliefs), 3)) %>%
rename(prior_hypothesis = hyp_q_order_prior)
d %>%
group_by(prior_hypothesis) %>%
summarise(m_prior = mean(prior_normalized)) %>%
ggplot(aes(x = ))
d %>%
group_by(prior_hypothesis) %>%
summarise(m_prior = mean(prior_normalized)) %>%
ggplot(aes(x = prior_hypothesis, y = m_prior))
d %>%
group_by(prior_hypothesis) %>%
summarise(m_prior = mean(prior_normalized)) %>%
ggplot(aes(x = prior_hypothesis, y = m_prior)) +
geom_bar()
d %>%
group_by(prior_hypothesis) %>%
summarise(m_prior = mean(prior_normalized)) %>%
ggplot(aes(x = prior_hypothesis, y = m_prior)) +
geom_bar(stat = "identity")
d %>%
group_by(prior_hypothesis) %>%
summarise(m_prior = mean(prior_normalized)) %>%
ggplot(aes(x = prior_hypothesis, y = m_prior)) +
geom_bar(stat = "identity", width = 0.4)
d %>%
select(id, action_response) %>%
unique() %>%
ggplot(aes(x = action_response)) +
geom_bar(stat = "count")
d %>%
select(id, action_response) %>%
unique() %>%
ggplot(aes(x = action_response)) +
geom_bar(stat = "count", width = 0.4)
d %<>%
group_by(id) %>%
mutate(posterior_normalized = round(posterior_beliefs / sum(posterior_beliefs), 3)) %>%
rename(prior_hypothesis = hyp_q_order_post)
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 2
library(magrittr); library(tidyverse); library(here)
theme_set(theme_minimal())
# Chunk 3
d_path <- "data/02_tidy_data/"
d <- read_csv(here(d_path, "goal_actions_tidy.csv"))
# Chunk 4
d %<>%
group_by(id) %>%
mutate(prior_normalized = round(prior_beliefs / sum(prior_beliefs), 3)) %>%
rename(prior_hypothesis = hyp_q_order_prior)
# Chunk 5
d %>%
group_by(prior_hypothesis) %>%
summarise(m_prior = mean(prior_normalized)) %>%
ggplot(aes(x = prior_hypothesis, y = m_prior)) +
geom_bar(stat = "identity", width = 0.4)
# Chunk 6
d %<>%
group_by(id) %>%
mutate(posterior_normalized = round(posterior_beliefs / sum(posterior_beliefs), 3)) %>%
rename(posterior_hypothesis = hyp_q_order_post)
d %>%
group_by(posterior_hypothesis) %>%
summarise(m_posterior = mean(posterior_normalized)) %>%
ggplot(aes(x = posterior_hypothesis, y = m_posterior)) +
geom_bar(stat = "identity", width = 0.4)
d %>%
select(id, action_response_collapsed) %>%
unique() %>%
ggplot(aes(x = action_response_collapsed)) +
geom_histogram(stat = "count")
