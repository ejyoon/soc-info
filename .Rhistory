View(tmp)
d$WorkerId
json_to_df <- function(file) {
d <- read_json(path = here(data_path, file))
d %>%
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_order_prior = d$answers$hypotheses_slider_order_prior
)
}
# takes a list and extracts the information we care about
json_to_df <- function(file, data_path) {
d <- read_json(path = here(data_path, file))
d %>%
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_order_prior = d$answers$hypotheses_slider_order_prior
)
}
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
d %>%
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_order_prior = d$answers$hypotheses_slider_order_prior
)
}
d_path <- "data/01_raw_data/goal_actions/sandbox-results/"
d <- json_to_df(data_path = d_path, file = "3XLBSAQ9Z4CRQGGXIU3KGGBZLZ8Z7C.json")
d
View(d)
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
d %>%
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_order_prior = d$answers$hypotheses_slider_order_prior
)
}
d <- json_to_df(data_path = d_path, file = "3XLBSAQ9Z4CRQGGXIU3KGGBZLZ8Z7C.json")
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
d <- d %>%
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_order_prior = d$answers$hypotheses_slider_order_prior
)
d
}
d <- json_to_df(data_path = d_path, file = "3XLBSAQ9Z4CRQGGXIU3KGGBZLZ8Z7C.json")
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
d %>%
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response
)
}
d <- json_to_df(data_path = d_path, file = "3XLBSAQ9Z4CRQGGXIU3KGGBZLZ8Z7C.json")
View(d)
d <- read_json(path = here(data_path, file))
d <- read_json(path = here(data_path, "3XLBSAQ9Z4CRQGGXIU3KGGBZLZ8Z7C.json"))
d %>%
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response
)
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response
)
}
tmp <- json_to_df(data_path = d_path, file = "3XLBSAQ9Z4CRQGGXIU3KGGBZLZ8Z7C.json")
View(tmp)
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior
)
}
tmp <- json_to_df(data_path = d_path, file = "3XLBSAQ9Z4CRQGGXIU3KGGBZLZ8Z7C.json")
View(tmp)
d$answers$hypotheses_slider_order_prior
d$answers$hypotheses_slider_order_prior %>% type()
d$answers$hypotheses_slider_order_prior %>% class()
d$answers$hypotheses_slider_order_prior %>% unlist
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist
)
}
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist()
)
}
tmp <- json_to_df(data_path = d_path, file = "3XLBSAQ9Z4CRQGGXIU3KGGBZLZ8Z7C.json")
View(tmp)
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs,
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs
)
}
tmp <- json_to_df(data_path = d_path, file = "3XLBSAQ9Z4CRQGGXIU3KGGBZLZ8Z7C.json")
View(d)
View(tmp)
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist()
)
}
tmp <- json_to_df(data_path = d_path, file = "3XLBSAQ9Z4CRQGGXIU3KGGBZLZ8Z7C.json")
View(d)
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device
)
}
tmp <- json_to_df(data_path = d_path, file = "3XLBSAQ9Z4CRQGGXIU3KGGBZLZ8Z7C.json")
View(tmp)
files <- dir(here(data_path))
files
files <- dir(here(d_path))
files
tmp <- files %>% purrr::map(~ json_to_df(data_path = d_path, .))
View(tmp)
tmp <- files %>% purrr::map(~ json_to_df(data_path = d_path, .)) %>% reduce()
tmp <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
View(tmp)
warnings
warnings()
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 2
library(lubridate); library(jsonlite); library(tidyverse); library(here)
# Chunk 3
d_path <- "data/01_raw_data/goal_actions/sandbox-results/"
# Chunk 4
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device
)
}
# Chunk 5
files <- dir(here(d_path))
d <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
read_json(path = here(data_path, file)) %>%
data.frame(
workerid = .$WorkerId,
action_response = .$answers$action_response,
hyp_q_order_prior = .$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = .$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = .$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = .$answers$posterior_beliefs %>% unlist(),
browser = .$answers$browser,
browser_width = .$answers$browser_width,
browser_height = .$answers$browser_height,
screen_width = .$answers$screen_width,
screen_height = .$answers$screen_height,
mobile_device = .$answers$mobile_device,
exp_time = .$answers
)
}
files <- dir(here(d_path))
d <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
View(d)
warnings
warnings()
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
read_json(path = here(data_path, file)) %>%
data.frame(
workerid = .$WorkerId,
action_response = .$answers$action_response,
hyp_q_order_prior = .$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = .$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = .$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = .$answers$posterior_beliefs %>% unlist(),
browser = .$answers$browser,
browser_width = .$answers$browser_width,
browser_height = .$answers$browser_height,
screen_width = .$answers$screen_width,
screen_height = .$answers$screen_height,
mobile_device = .$answers$mobile_device
)
}
files <- dir(here(d_path))
d <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
View(d)
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file)) %>%
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device,
exp_time = d$answers
)
}
files <- dir(here(d_path))
df <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 2
library(lubridate); library(jsonlite); library(tidyverse); library(here)
# Chunk 3
d_path <- "data/01_raw_data/goal_actions/sandbox-results/"
# Chunk 4
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file)) %>%
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device,
exp_time = d$answers
)
}
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file)) %>%
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device
)
}
files <- dir(here(d_path))
df <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 2
library(lubridate); library(jsonlite); library(tidyverse); library(here)
# Chunk 3
d_path <- "data/01_raw_data/goal_actions/sandbox-results/"
# Chunk 4
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file)) %>%
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device
)
}
files <- dir(here(d_path))
df <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
files
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device
)
}
files <- dir(here(d_path))
df <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
df
View(d)
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device,
about = d$about,
comment = d$comment,
age = d$age,
gender = d$gender,
first_language = d$language,
experiment_time = d$experiment_completion_time / 1000,
action_trial_time = d$action_trial_time / 100
)
}
files <- dir(here(d_path))
df <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device,
about = d$answers$about,
comment = d$answers$comment,
age = d$answers$age,
gender = d$answers$gender,
first_language = d$answers$language,
experiment_time = d$answers$experiment_completion_time / 1000,
action_trial_time = d$answers$action_trial_time / 100
)
}
files <- dir(here(d_path))
df <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
View(df)
# takes a list and extracts the information we care about
json_to_df <- function(data_path, file) {
d <- read_json(path = here(data_path, file))
data.frame(
workerid = d$WorkerId,
action_response = d$answers$action_response,
hyp_q_order_prior = d$answers$hypotheses_slider_order_prior %>% unlist(),
prior_beliefs = d$answers$prior_beliefs %>% unlist(),
hyp_q_order_post = d$answers$hypotheses_slider_order_posterior %>% unlist(),
posterior_beliefs = d$answers$posterior_beliefs %>% unlist(),
browser = d$answers$browser,
browser_width = d$answers$browser_width,
browser_height = d$answers$browser_height,
screen_width = d$answers$screen_width,
screen_height = d$answers$screen_height,
mobile_device = d$answers$mobile_device,
about = d$answers$about,
comment = d$answers$comment,
age = d$answers$age,
gender = d$answers$gender,
first_language = d$answers$language,
experiment_time = d$answers$experiment_completion_time / 1000,
action_trial_time = d$answers$action_trial_time / 1000
)
}
files <- dir(here(d_path))
df <- files %>% purrr::map_df(~ json_to_df(data_path = d_path, .))
df_anonymized <- df %>%
select(workerid) %>%
distinct() %>%
mutate(subids = 1:nrow(.))
View(df_anonymized)
df_anonymized <- df %>%
select(workerid) %>%
distinct() %>%
mutate(subids = 1:nrow(.)) %>%
bind_cols(., df)
df_anonymized <- df %>%
select(workerid) %>%
distinct() %>%
mutate(subids = 1:nrow(.)) %>%
select(-workerid)
df_anonymized
df_anonymized <- df %>%
select(workerid) %>%
distinct() %>%
mutate(subid = 1:nrow(.)) %>%
select(-workerid)
df_anonymized <- df %>%
select(workerid) %>%
distinct() %>%
mutate(id = 1:nrow(.)) %>%
select(-workerid)
df %>% distinct(workerid)
df %>% distinct(workerid) %>% length()
df %>% distinct(workerid) %>% nrow()
n_subs <- df %>% distinct(workerid) %>% nrow()
n_subs
df_anonymized <- df %>%
select(workerid) %>%
distinct() %>%
mutate(id = 1:nrow(.))
df_final <- left_join(df, df_anonymized, by = "workerid")
View(df_final)
?select
df_anonymized <- df %>%
select(workerid) %>%
distinct() %>%
mutate(id = 1:nrow(.))
df_final <- left_join(df, df_anonymized, by = "workerid") %>%
select(id, everything())
df_anonymized <- df %>%
select(workerid) %>%
distinct() %>%
mutate(id = 1:nrow(.))
df_final <- left_join(df, df_anonymized, by = "workerid") %>%
select(id, everything(), - workerid)
write_csv(df_final, path = here("data/02_tidy_data"))
here()
write_csv(df_final, path = here("data/02_tidy_data/"))
?write_csv
here()
?here
write_csv(df_final, path = here("/data/02_tidy_data"))
write_csv(df_final, path = here("/data/02_tidy_data", "goal_action_tidy.csv"))
write_csv(df_final, path = here("/data/02_tidy_data", "goal_actions_tidy.csv"))
